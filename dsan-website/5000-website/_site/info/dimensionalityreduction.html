<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>BRICS - Introduction to Dimensionality Reduction</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../theme.scss">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">BRICS</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../codes/index1.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text">About Me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../info/introduction.html" rel="" target="">
 <span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/anly501/dsan-5000-project-msheeba4848/tree/main/dsan-website/5000-website" rel="" target="">
 <span class="menu-text">Code</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../info/data.html" rel="" target="">
 <span class="menu-text">Data</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data-gathering" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Data Gathering</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data-gathering">    
        <li>
    <a class="dropdown-item" href="../codes/data_gathering_r.html" rel="" target="">
 <span class="dropdown-text">Data Gathering - R</span></a>
  </li>  
        <li class="dropdown-header">Data Gathering - R</li>
        <li>
    <a class="dropdown-item" href="../codes/data_gathering_p.html" rel="" target="">
 <span class="dropdown-text">Data Gathering - Python</span></a>
  </li>  
        <li class="dropdown-header">Data Gathering - P</li>
        <li>
    <a class="dropdown-item" href="../codes/record_data.html" rel="" target="">
 <span class="dropdown-text">Record Data</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data-cleaning" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Data Cleaning</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data-cleaning">    
        <li>
    <a class="dropdown-item" href="../codes/data_cleaning_r.html" rel="" target="">
 <span class="dropdown-text">Quantitative Data</span></a>
  </li>  
        <li class="dropdown-header">Data Cleaning - R</li>
        <li>
    <a class="dropdown-item" href="../codes/data_cleaning_p.html" rel="" target="">
 <span class="dropdown-text">Quantitative Data</span></a>
  </li>  
        <li class="dropdown-header">Data Cleaning - Python</li>
        <li>
    <a class="dropdown-item" href="../codes/data_cleaning_record.html" rel="" target="">
 <span class="dropdown-text">Data Gathering - Record Data</span></a>
  </li>  
        <li class="dropdown-header">Data Cleaning - Record Data</li>
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data-exploration" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Data Exploration</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data-exploration">    
        <li>
    <a class="dropdown-item" href="../codes/EDA.html" rel="" target="">
 <span class="dropdown-text">Exploratory Data Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../codes/naive_bayes.html" rel="" target="">
 <span class="dropdown-text">Naive Bayes</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../codes/clustering.html" rel="" target="">
 <span class="menu-text">Clustering</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../codes/dimensionalityreduction.html" rel="" target="">
 <span class="menu-text">Dimensionality Reduction</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-decision-trees" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Decision Trees</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-decision-trees">    
        <li>
    <a class="dropdown-item" href="../codes/decisiontree_c.html" rel="" target="">
 <span class="dropdown-text">Classification</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../codes/decisiontree_r.html" rel="" target="">
 <span class="dropdown-text">Regression</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../info/conclusion.html" rel="" target="">
 <span class="menu-text">Conclusion</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#principal-component-analysis-pca" id="toc-principal-component-analysis-pca" class="nav-link active" data-scroll-target="#principal-component-analysis-pca">Principal Component Analysis (PCA)</a></li>
  <li><a href="#t-distributed-stochastic-neighbor-embedding-t-sne" id="toc-t-distributed-stochastic-neighbor-embedding-t-sne" class="nav-link" data-scroll-target="#t-distributed-stochastic-neighbor-embedding-t-sne">T-distributed Stochastic Neighbor Embedding (t-SNE)</a>
  <ul class="collapse">
  <li><a href="#pca-vs-t-sne" id="toc-pca-vs-t-sne" class="nav-link" data-scroll-target="#pca-vs-t-sne">PCA vs t-SNE</a></li>
  <li><a href="#pca-vs-t-sne--the-curse-of-dimensionality-continued" id="toc-pca-vs-t-sne--the-curse-of-dimensionality-continued" class="nav-link" data-scroll-target="#pca-vs-t-sne--the-curse-of-dimensionality-continued">PCA vs t-SNE- the curse of dimensionality continued?</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Introduction to Dimensionality Reduction</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>When we do predictive analysis mainly, the number of independant that go into the modelling play an important role, in addition to the size of the dataset and the way it has been pre-processed.</p>
<p>Since the independant variables, or the “predictors” actually play an important role in deciding the course of the outcomes, may it be supervised or unsupervised learning, it’s crucial to choose the correct feature sets that best describes your data.</p>
<p>There are several definitions for Dimensionality Reduction, however, all in all, it is a process that reduces the number of features from a dataset whilst retaining the information. Usually, dimensionality reduction is done when you have a feature set that can be highly correlated, highly complex or just doesn’t contribute to the outcome or improve the performance of the algorithm. Hence, our main goal with dimensionality reduction is to make the data less dimensional and preserve the information in the dataset.</p>
<p>Dimensionality Reduction can be done in different ways, with Principal Component Analysis (PCA) and t-SNE being one of them.</p>
<p>For this project, two techniques will be used</p>
<ol type="1">
<li>PCA (Principal Component Analysis)</li>
<li>t-SNE (T-distributed Stochastic Neighbor Embedding)</li>
</ol>
<p>As we often use Dimensionality Reduction as Feature Selection and Feature Extraction methods, in this project, we use it as a Feature Extraction method, where we attempt to derive a new feature set from the existing independant variables to construct an optimal feature subspace.</p>
<section id="principal-component-analysis-pca" class="level2">
<h2 class="anchored" data-anchor-id="principal-component-analysis-pca">Principal Component Analysis (PCA)</h2>
<p>PCA (Principal Component Analysis) is a statistical technique that uses linear transformations to discover the most relevant features, or principal components, in high-dimensional datasets. Hence, PCA creates a low-dimensional representation of a dataset and finds the most variable sequence of linear combinations of mutually uncorrelated variables. It can be used to display data in addition to giving derived variables for use in supervised learning tasks.</p>
<p>This is particularly true when working with big amounts of data. PCA accomplishes this by transforming the data into a new set of variables known as principal components, which contain the data’s most significant variations. Most researchers and people into data analysis can use PCA to focus on the most important features of data, making it easier to understand and work with.</p>
<p>Since I have worked with PCA before, the sklearn library is a wonderful tool for this.</p>
<p>For PCA, one of the important things is to get rid of any labels within the data. Hence, there is only a set of numerical variables. For this dataset, the highly correlated variables have already been removed to reduce multicollinearity of the dataset as much as possible.</p>
<div class="cell" data-execution_count="189">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import Libraries </span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.decomposition <span class="im">import</span> PCA</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.manifold <span class="im">import</span> TSNE</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> StandardScaler, LabelEncoder</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> silhouette_score</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> LabelEncoder</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="190">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>stackeddf<span class="op">=</span> pd.read_csv(<span class="st">"../data/stackeddf.csv"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>stackeddf.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="190">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">adj_NNI_g</th>
<th data-quarto-table-cell-role="th">adj_savings_fix_cap_GNI</th>
<th data-quarto-table-cell-role="th">adj_savings_edu_GNI</th>
<th data-quarto-table-cell-role="th">adj_NNS_GNI</th>
<th data-quarto-table-cell-role="th">ex_imp_growth</th>
<th data-quarto-table-cell-role="th">ex_debt_shocks</th>
<th data-quarto-table-cell-role="th">fdi_net_outflows</th>
<th data-quarto-table-cell-role="th">gdp_growth</th>
<th data-quarto-table-cell-role="th">short_term_debt_tot_reserves</th>
<th data-quarto-table-cell-role="th">lending_interest_rate</th>
<th data-quarto-table-cell-role="th">life_exp_birth</th>
<th data-quarto-table-cell-role="th">expense_gdp</th>
<th data-quarto-table-cell-role="th">military expenditure</th>
<th data-quarto-table-cell-role="th">labels</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>-1.647859</td>
<td>1.230366</td>
<td>0.270892</td>
<td>-0.277537</td>
<td>-0.052004</td>
<td>0.419580</td>
<td>-1.270470</td>
<td>-0.842531</td>
<td>1.595002</td>
<td>-0.032164</td>
<td>-0.845342</td>
<td>-0.112698</td>
<td>-0.121526</td>
<td>-0.167829</td>
<td>High Growth</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>-1.572340</td>
<td>-1.216110</td>
<td>0.313510</td>
<td>-0.277537</td>
<td>0.103127</td>
<td>-0.481153</td>
<td>-1.204634</td>
<td>-0.842808</td>
<td>1.304262</td>
<td>0.403253</td>
<td>-0.845342</td>
<td>-0.110878</td>
<td>-0.141348</td>
<td>-0.151690</td>
<td>High Growth</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>-1.496821</td>
<td>-0.510146</td>
<td>0.367195</td>
<td>-0.277537</td>
<td>0.049534</td>
<td>0.536099</td>
<td>-0.969857</td>
<td>-0.842942</td>
<td>0.295912</td>
<td>0.851964</td>
<td>-0.845342</td>
<td>-0.109081</td>
<td>-0.105898</td>
<td>-0.102821</td>
<td>Moderate Growth</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>-1.421301</td>
<td>1.160350</td>
<td>0.316780</td>
<td>-0.277537</td>
<td>0.046547</td>
<td>-0.495731</td>
<td>-0.889487</td>
<td>-0.842495</td>
<td>1.815392</td>
<td>1.403674</td>
<td>-0.845342</td>
<td>-0.107310</td>
<td>-0.098738</td>
<td>-0.109603</td>
<td>Very High Growth</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>-1.345782</td>
<td>-0.472199</td>
<td>0.362786</td>
<td>-0.277537</td>
<td>0.058430</td>
<td>0.726138</td>
<td>-0.708319</td>
<td>-0.842596</td>
<td>0.433390</td>
<td>1.517825</td>
<td>-0.845342</td>
<td>-0.105584</td>
<td>-0.034063</td>
<td>-0.080748</td>
<td>Moderate Growth</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>-1.270263</td>
<td>-0.351675</td>
<td>0.434567</td>
<td>-0.277537</td>
<td>0.132578</td>
<td>-1.299124</td>
<td>-0.543663</td>
<td>-0.842744</td>
<td>1.004641</td>
<td>1.655880</td>
<td>-0.845342</td>
<td>-0.103913</td>
<td>0.040985</td>
<td>-0.033944</td>
<td>High Growth</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>-1.194744</td>
<td>-0.021989</td>
<td>0.439905</td>
<td>-0.277537</td>
<td>-0.046028</td>
<td>0.448600</td>
<td>-0.377613</td>
<td>-0.843166</td>
<td>0.814271</td>
<td>1.717391</td>
<td>-0.845342</td>
<td>-0.102297</td>
<td>0.099256</td>
<td>0.131376</td>
<td>Moderate Growth</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>-1.119224</td>
<td>0.331103</td>
<td>0.482043</td>
<td>-0.277537</td>
<td>0.103695</td>
<td>1.533911</td>
<td>-0.232320</td>
<td>-0.842619</td>
<td>0.491018</td>
<td>1.817072</td>
<td>-0.845342</td>
<td>-0.100749</td>
<td>0.125278</td>
<td>0.169781</td>
<td>Moderate Growth</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>-1.043705</td>
<td>0.612465</td>
<td>0.472153</td>
<td>-0.277537</td>
<td>0.323107</td>
<td>0.752206</td>
<td>-0.116249</td>
<td>-0.842141</td>
<td>2.747401</td>
<td>2.769720</td>
<td>-0.845342</td>
<td>-0.099258</td>
<td>0.110237</td>
<td>0.015163</td>
<td>Very High Growth</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>-0.968186</td>
<td>0.339376</td>
<td>0.482635</td>
<td>-0.277537</td>
<td>0.630367</td>
<td>1.422604</td>
<td>0.516698</td>
<td>-0.842224</td>
<td>1.280807</td>
<td>3.915796</td>
<td>-0.845342</td>
<td>-0.097787</td>
<td>0.137684</td>
<td>-0.044664</td>
<td>High Growth</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Here, we see that the data has both numerical and categorical variables which have already been normalised using the standard scalar. It is preprocessing technique that uses the z-score normalisation method to ensure the features are all on a comparible scale, with a mean of zero and a standard deviation of 1. Hemce, we separate the data into ‘x’ and ‘y’ variables.</p>
<div class="cell" data-execution_count="191">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> stackeddf[<span class="st">'labels'</span>]</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> stackeddf.drop([<span class="st">'labels'</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>label_encoder <span class="op">=</span> LabelEncoder()</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>y_encoded <span class="op">=</span> label_encoder.fit_transform(y)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="192">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>pca1 <span class="op">=</span> PCA()</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>pca_result <span class="op">=</span> pca1.fit_transform(x)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pca_result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[ 7.62571967e-01 -6.26043200e-01 -2.30866090e-01 ... -3.68266626e-02
  -9.43207244e-03 -1.16249461e-12]
 [ 1.86852321e+00 -1.42033301e+00  1.23674495e-01 ...  2.85634458e-02
   2.13734846e-02 -2.92247919e-13]
 [ 1.78069560e+00 -6.75060179e-01 -7.31259179e-01 ...  5.53506048e-03
   2.15628745e-03 -1.56198277e-12]
 ...
 [ 2.00350774e+00 -3.63942297e+00 -1.87451963e+00 ...  1.76194346e-01
  -2.61901427e-02  3.58573041e-12]
 [ 5.11008136e-02 -1.05869012e+00 -2.55586066e+00 ...  7.92424281e-02
  -4.88649412e-02 -7.00359148e-12]
 [ 6.30703303e-01  1.25498085e+00 -2.37715116e+00 ...  1.25566938e-02
  -1.50273539e-02  2.09849158e-12]]</code></pre>
</div>
</div>
<p>But, we need to find the optimal components of the data that best describes the data through the explained variance ratio, hence, we use the explained variance ratio and define our own threshold and see.</p>
<div class="cell" data-execution_count="193">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>evr<span class="op">=</span> pca1.explained_variance_ratio_</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>cum_var <span class="op">=</span> np.cumsum(pca1.explained_variance_ratio_)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>optimal <span class="op">=</span> np.argmax(cum_var <span class="op">&gt;=</span> <span class="fl">0.75</span>) <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Optimal Number of Components:"</span>, optimal)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>plt.plot(<span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">len</span>(cum_var) <span class="op">+</span> <span class="dv">1</span> ), cum_var, linestyle<span class="op">=</span><span class="st">'--'</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Components'</span>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Explained Variance Ratio (cumulative)'</span>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Scree Plot'</span>)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>plt.grid()</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Optimal Number of Components: 4</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="dimensionalityreduction_files/figure-html/cell-6-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>This shows me that the optimal number of components are 4 that attempts to explain at least 75% of the data. I have used ‘Scree Plot’ which visually showcases for a threshold of 0.75. Since we know the optimal components of the data, we can calculate the PCA</p>
<div class="cell" data-execution_count="194">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>pca2 <span class="op">=</span> PCA(n_components<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>pca_optimal2 <span class="op">=</span> pca2.fit_transform(x)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>evr2 <span class="op">=</span> pca2.explained_variance_ratio_</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>cev2 <span class="op">=</span> np.cumsum(evr2)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pca_optimal2[<span class="dv">0</span>:<span class="dv">10</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[ 0.76257197 -0.6260432  -0.23086609 -2.59040608]
 [ 1.86852321 -1.42033301  0.1236745  -1.00166474]
 [ 1.7806956  -0.67506018 -0.73125918 -0.66213051]
 [ 1.73581487  0.08114664  0.88863619 -2.10613841]
 [ 1.91751146 -0.02151058 -0.62973654 -0.38327002]
 [ 2.71648514 -0.68755858  1.03310853 -0.8007282 ]
 [ 1.97349223  0.24045813 -0.25631107 -0.67853068]
 [ 1.42712716  0.85358937 -0.9723162  -0.45607911]
 [ 1.35839281  1.90954496  0.73221295 -1.18362437]
 [ 1.94311949  2.67844446  0.0827333   0.30600975]]</code></pre>
</div>
</div>
<p>The following are the first few values of the pca.</p>
<div class="cell" data-execution_count="195">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>pcadf <span class="op">=</span> pd.DataFrame(data<span class="op">=</span>pca_optimal2, index<span class="op">=</span>x.index, columns<span class="op">=</span> [<span class="st">'PC1'</span>,<span class="st">'PC2'</span>, <span class="st">'PC3'</span>,<span class="st">'PC4'</span>])</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>pcadf.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="195">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">PC1</th>
<th data-quarto-table-cell-role="th">PC2</th>
<th data-quarto-table-cell-role="th">PC3</th>
<th data-quarto-table-cell-role="th">PC4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>0.762572</td>
<td>-0.626043</td>
<td>-0.230866</td>
<td>-2.590406</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>1.868523</td>
<td>-1.420333</td>
<td>0.123674</td>
<td>-1.001665</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>1.780696</td>
<td>-0.675060</td>
<td>-0.731259</td>
<td>-0.662131</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>1.735815</td>
<td>0.081147</td>
<td>0.888636</td>
<td>-2.106138</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>1.917511</td>
<td>-0.021511</td>
<td>-0.629737</td>
<td>-0.383270</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>2.716485</td>
<td>-0.687559</td>
<td>1.033109</td>
<td>-0.800728</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>1.973492</td>
<td>0.240458</td>
<td>-0.256311</td>
<td>-0.678531</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>1.427127</td>
<td>0.853589</td>
<td>-0.972316</td>
<td>-0.456079</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>1.358393</td>
<td>1.909545</td>
<td>0.732213</td>
<td>-1.183624</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>1.943119</td>
<td>2.678444</td>
<td>0.082733</td>
<td>0.306010</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="196">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Explained Variance Ratio for Each Component:"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(evr2<span class="op">*</span><span class="dv">100</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Cumulative Explained Variance:"</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cev2<span class="op">*</span><span class="dv">100</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>e <span class="op">=</span> pca2.explained_variance_ratio_</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Print overall explained variance ratio</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Overall Explained Variance Ratio:"</span>, <span class="bu">sum</span>(e)<span class="op">*</span><span class="dv">100</span>)</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> silhouette_samples</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>sil_val <span class="op">=</span> silhouette_samples(pca_optimal2, y)</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sil_val[<span class="dv">0</span>:<span class="dv">10</span>])</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>avg_sil_score <span class="op">=</span> np.mean(sil_val)</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Average Silhouette Score for PCA: </span><span class="sc">{</span>avg_sil_score<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Explained Variance Ratio for Each Component:
[34.22972792 22.08761959 14.72048604 11.766315  ]

Cumulative Explained Variance:
[34.22972792 56.31734751 71.03783355 82.80414855]
Overall Explained Variance Ratio: 82.80414854824097
[-0.07892657 -0.02874872 -0.09320622 -0.16876901 -0.11519626  0.04725516
 -0.13561769 -0.0658181  -0.15181648  0.02498319]
Average Silhouette Score for PCA: -0.09704378289382186</code></pre>
</div>
</div>
<p>As we have put in our threshold of 0.75, we see that the overall explained variance ratio, which talks about the proportion of variance captured by the dataset is 82%. You see even for each component, there are few points that perform better than the other.</p>
<div class="cell" data-execution_count="197">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>plt.plot(<span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">len</span>(e) <span class="op">+</span> <span class="dv">1</span>), cev2, marker<span class="op">=</span><span class="st">'o'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Number of Components'</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Cumulative Explained Variance'</span>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Scree Plot'</span>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>plt.grid()</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="dimensionalityreduction_files/figure-html/cell-10-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Here, we see that the the optimal performance was for 4. As the components keep increasing, so did the explained cumulative values.</p>
<div class="cell" data-execution_count="198">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">10</span>))</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> label_value <span class="kw">in</span> y.unique():</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    indices <span class="op">=</span> y <span class="op">==</span> label_value</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    plt.scatter(pca_optimal2[indices, <span class="dv">0</span>], pca_optimal2[indices, <span class="dv">1</span>], label<span class="op">=</span>label_value, alpha<span class="op">=</span><span class="fl">0.5</span>, cmap<span class="op">=</span><span class="st">'viridis'</span>)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Principal Component 1'</span>)</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Principal Component 2'</span>)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Reduced-Dimensional Data with PCA'</span>)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/cm/1bq_zvw92w99j_5d1p5jq5v40000gn/T/ipykernel_46417/3805980677.py:5: UserWarning:

No data for colormapping provided via 'c'. Parameters 'cmap' will be ignored
</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="dimensionalityreduction_files/figure-html/cell-11-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Here, we see that for PCA, the clustering looks differentiable enough in some places but overall just overlapping each other. Although the explained variance ratio is around 82%, one of the interesting parts is how as we iterate through each component, we see that explained variance ratio is as minimal as 10% and as high as 80%. But if we look at the components by itself, like PCA1, PCA2, etc, first PCA performs the best. So, cumulatively, they’re almost attempting to capture the variance through the divide and conquer policy. Economic data is extremely highly dimensional, and hence it has done a good job in figuring out the differences.</p>
</section>
<section id="t-distributed-stochastic-neighbor-embedding-t-sne" class="level2">
<h2 class="anchored" data-anchor-id="t-distributed-stochastic-neighbor-embedding-t-sne">T-distributed Stochastic Neighbor Embedding (t-SNE)</h2>
<p>The T-distributed Stochastic Neighbor Embedding, also called as t-SNE is another dimensionality reduction technique that focuses on data separation when the data cannot be linearly separated or rather, by a straight line. It helps us understand how the data is arranged and to understand the underlying patterns in the dataset. As t-SNE uses probability distribution to map similar data points, and keep the dissimilar ones apart; it does using the Kullback-Leibler divergence between the low and high dimensional embedding. However, t-SNE with different initialisations can get us different results, due to which although preserves the structure of the original data, we still need to aware of our initial value.</p>
<div class="cell" data-execution_count="199">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>perplex_values <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">30</span>, <span class="dv">35</span>, <span class="dv">40</span>, <span class="dv">45</span>, <span class="dv">50</span>, <span class="dv">55</span>, <span class="dv">60</span>, <span class="dv">100</span>]</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> p <span class="kw">in</span> perplex_values:</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    tsne <span class="op">=</span> TSNE(n_components<span class="op">=</span><span class="dv">2</span>, perplexity<span class="op">=</span>p, random_state<span class="op">=</span><span class="dv">2339</span>)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    X <span class="op">=</span> tsne.fit_transform(x)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    avg <span class="op">=</span> silhouette_score(X, y)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Perplexity </span><span class="sc">{</span>p<span class="sc">}</span><span class="ss">: Silhouette Score = </span><span class="sc">{</span>avg<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Perplexity 1: Silhouette Score = -0.08198484778404236
Perplexity 2: Silhouette Score = -0.055559705942869186
Perplexity 3: Silhouette Score = -0.06099412217736244
Perplexity 4: Silhouette Score = -0.06829451769590378
Perplexity 5: Silhouette Score = -0.0636918768286705
Perplexity 10: Silhouette Score = -0.06911653280258179
Perplexity 15: Silhouette Score = -0.09194755554199219
Perplexity 20: Silhouette Score = -0.08281858265399933
Perplexity 25: Silhouette Score = -0.08434560894966125
Perplexity 30: Silhouette Score = -0.0772019475698471
Perplexity 35: Silhouette Score = -0.09676646441221237
Perplexity 40: Silhouette Score = -0.11943919956684113
Perplexity 45: Silhouette Score = -0.06866727024316788
Perplexity 50: Silhouette Score = -0.1278223693370819
Perplexity 55: Silhouette Score = -0.09298355877399445
Perplexity 60: Silhouette Score = -0.08441784232854843
Perplexity 100: Silhouette Score = -0.0959368422627449</code></pre>
</div>
</div>
<div class="cell" data-execution_count="200">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>val <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">50</span>, <span class="dv">100</span>]</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create subplots to compare t-SNE results with different perplexities</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">5</span>))</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, p <span class="kw">in</span> <span class="bu">enumerate</span>(val, <span class="dv">1</span>):</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    tsne <span class="op">=</span> TSNE(n_components<span class="op">=</span><span class="dv">3</span>, perplexity<span class="op">=</span>p, random_state<span class="op">=</span><span class="dv">2339</span>)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    X_tsne <span class="op">=</span> tsne.fit_transform(x)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    plt.subplot(<span class="dv">1</span>, <span class="bu">len</span>(val), i)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    plt.scatter(X_tsne[:, <span class="dv">0</span>], X_tsne[:, <span class="dv">1</span>], c<span class="op">=</span>y_encoded, cmap<span class="op">=</span><span class="st">'viridis'</span>, alpha<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f't-SNE with Perplexity </span><span class="sc">{</span>p<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(<span class="st">'t-SNE Component 1'</span>)</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(<span class="st">'t-SNE Component 2'</span>)</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="dimensionalityreduction_files/figure-html/cell-13-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>The hyperparameter choice is perplexity in t-SNE, that controls the balance in preserving both local and glocal structure in a low-dimensional embedding. A higher perplexity value usually focuses on the global structure and lower perplexity on the local structure. As the choice of perplexity can really affect the choice of the output, it is often important to choose the optimal perplexity value which the code above attempts to achieve.</p>
<p>All values of perplexity are negative in nature, and shows that all the clusters are going to overlap each other. This suggests poor separation between the clusters. This showcases the importance of the nature of the dataset, maybe due to the inherent structure of the data or due to the fact that there are outliers which cannot be removed when it comes to economic data.</p>
<p>But here, it shows, perplexity value of 2 is closer to one so we will choose that.</p>
<div class="cell" data-execution_count="201">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>tsne <span class="op">=</span> TSNE(n_components<span class="op">=</span><span class="dv">3</span>, perplexity<span class="op">=</span><span class="dv">2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>X_tsne <span class="op">=</span> tsne.fit_transform(x)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>sil_tsne <span class="op">=</span> silhouette_samples(X_tsne, y)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sil_tsne[<span class="dv">0</span>:<span class="dv">10</span>])</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>avg_tsne_score <span class="op">=</span> np.mean(sil_tsne)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Average Silhouette Score for t-SNE: </span><span class="sc">{</span>avg_tsne_score<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[ 0.00318419  0.01473387 -0.02172711 -0.16240974  0.00434295  0.08726601
 -0.06315608  0.04417509  0.05092624 -0.14183001]
Average Silhouette Score for t-SNE: -0.06379585713148117</code></pre>
</div>
</div>
<div class="cell" data-execution_count="202">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>plt.scatter(X_tsne[:, <span class="dv">0</span>], X_tsne[:, <span class="dv">1</span>], c<span class="op">=</span>y_encoded, cmap<span class="op">=</span><span class="st">'viridis'</span>, alpha<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="ss">f't-SNE with Perplexity </span><span class="sc">{</span><span class="dv">2</span><span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'t-SNE Component 1'</span>)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'t-SNE Component 2'</span>)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="dimensionalityreduction_files/figure-html/cell-15-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Here, we see that t-SNE has done an extremely bad job in predicting the clusters as there is no relation of each other with one another.</p>
<section id="pca-vs-t-sne" class="level3">
<h3 class="anchored" data-anchor-id="pca-vs-t-sne">PCA vs t-SNE</h3>
<div class="cell" data-execution_count="203">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">6</span>))</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> label_value <span class="kw">in</span> y.unique():</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    indices <span class="op">=</span> y <span class="op">==</span> label_value</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    plt.scatter(pca_optimal2[indices, <span class="dv">0</span>], pca_optimal2[indices, <span class="dv">1</span>], label<span class="op">=</span>label_value, alpha<span class="op">=</span><span class="fl">0.5</span>, cmap<span class="op">=</span><span class="st">'viridis'</span>)</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Principal Component 1'</span>)</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Principal Component 2'</span>)</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Reduced-Dimensional Data with PCA'</span>)</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> label_value <span class="kw">in</span> y.unique():</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>    indices <span class="op">=</span> y <span class="op">==</span> label_value</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>    plt.scatter(X_tsne[indices, <span class="dv">0</span>], X_tsne[indices, <span class="dv">1</span>], label<span class="op">=</span>label_value, alpha<span class="op">=</span><span class="fl">0.5</span>, cmap<span class="op">=</span><span class="st">'viridis'</span>)</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding legend</span></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="ss">f't-SNE with Perplexity </span><span class="sc">{</span><span class="dv">2</span><span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'t-SNE Component 1'</span>)</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'t-SNE Component 2'</span>)</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/cm/1bq_zvw92w99j_5d1p5jq5v40000gn/T/ipykernel_46417/2199779955.py:6: UserWarning:

No data for colormapping provided via 'c'. Parameters 'cmap' will be ignored

/var/folders/cm/1bq_zvw92w99j_5d1p5jq5v40000gn/T/ipykernel_46417/2199779955.py:17: UserWarning:

No data for colormapping provided via 'c'. Parameters 'cmap' will be ignored
</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="dimensionalityreduction_files/figure-html/cell-16-output-2.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="dimensionalityreduction_files/figure-html/cell-16-output-3.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="pca-vs-t-sne--the-curse-of-dimensionality-continued" class="level3">
<h3 class="anchored" data-anchor-id="pca-vs-t-sne--the-curse-of-dimensionality-continued">PCA vs t-SNE- the curse of dimensionality continued?</h3>
<p>Keeping in mind the fact that dimensionality can improve the model, there are often instances when utilising dimensionality techniques as a feature extraction method does not help the data in itself. This fundamentally showcases the importance of having a good dataset and choosing the feature selection/extraction methods on basis of your dataset’s requirements.</p>
<p>However, if you look at both PCA and t-SNE, in terms of effectiveness, PCA’s CMV or cumulative explained variance ratio is around 82%. One of the problems with t-SNE through my research is that there is no proper metric in my current range of understanding that numerically quanitfies t-SNE well. But, in terms of the silhoute score, either we should calculate for each point and then do the sum of it, or play around with the data. But in terms of the calculation, what I had done for both of them was looking at ‘y’, which is the label value and essentially find out silhoutte scores for each component of the transformed variable and then you find the average of it.</p>
<div class="cell" data-execution_count="204">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Average Silhouette Score for t-SNE: </span><span class="sc">{</span>avg_tsne_score<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Average Silhouette Score for PCA: </span><span class="sc">{</span>avg_sil_score<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Average Silhouette Score for t-SNE: -0.06379585713148117
Average Silhouette Score for PCA: -0.09704378289382186</code></pre>
</div>
</div>
<p>If you look at the silhoutte scores, we see that t-SNE actually seems to perform better than PCA but visualisation wise, I see more clustering for PCA than t-SNE.</p>
<p>In terms of the quality of the cluster-separation, we see that both do a bad job at that since all the clusters are overlapping each other. Although PCA is effective for linear relationships and t-SNE is powerful in capturing the non-linear relationships of the data, both do not do a good job with clustering of my economic data. The reason being is in my opinion, the dataset is not that huge and most of the data is correlated to one another.</p>
<p>As PCA is suiltable for larger datasets and t-SNE is suitable for smaller datasets, I wanted to attempt the combined approach</p>
<div class="cell" data-execution_count="205">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co"># t-sne on pca</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>tsne_on_pca <span class="op">=</span> TSNE(n_components<span class="op">=</span><span class="dv">3</span>, perplexity<span class="op">=</span><span class="dv">2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>tsne_pca <span class="op">=</span> tsne_on_pca.fit_transform(pca_optimal2)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co"># pca on t-sne</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>pca_on_tsne <span class="op">=</span> PCA(n_components<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>pca_tsne <span class="op">=</span> pca_on_tsne.fit_transform(tsne_pca)</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize PCA and t-SNE plots together</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">5</span>))</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="co"># orginal pca </span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">1</span>)</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>plt.scatter(pca_optimal2[:, <span class="dv">0</span>], pca_optimal2[:, <span class="dv">1</span>], c<span class="op">=</span>y_encoded, cmap<span class="op">=</span><span class="st">'viridis'</span>, alpha<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Original PCA'</span>)</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Principal Component 1'</span>)</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Principal Component 2'</span>)</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a><span class="co"># t-sne on pca</span></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>)</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>plt.scatter(tsne_pca[:, <span class="dv">0</span>], tsne_pca[:, <span class="dv">1</span>], c<span class="op">=</span>y_encoded, cmap<span class="op">=</span><span class="st">'viridis'</span>, alpha<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'t-SNE on PCA'</span>)</span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'t-SNE Component 1'</span>)</span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'t-SNE Component 2'</span>)</span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a><span class="co"># pca on t-sne</span></span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a>plt.scatter(pca_tsne[:, <span class="dv">0</span>], pca_tsne[:, <span class="dv">1</span>], c<span class="op">=</span>y_encoded, cmap<span class="op">=</span><span class="st">'viridis'</span>, alpha<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'PCA on t-SNE'</span>)</span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Principal Component 1'</span>)</span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Principal Component 2'</span>)</span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="dimensionalityreduction_files/figure-html/cell-18-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>We can see that, using the combined approach really just messed the data within itself that that pca by itself is the best option to go with.</p>
<p>To summarise, the decision between PCA and t-SNE is influenced by the type of the data, the size of the dataset, and the specific goals of the research. Both strategies yield useful insights, and a well-considered mix of both methods can provide a more comprehensive knowledge of complex datasets. Yet, for mine, neither worked.</p>
<p>Sources:</p>
<p>Dimensionality Reduction</p>
<ol type="1">
<li>https://www.geeksforgeeks.org/dimensionality-reduction/</li>
</ol>
<p>PCA:</p>
<ol type="1">
<li><p>https://jfh.georgetown.domains/dsan5000/slides-and-labs/_site/content/slides/dimensionality-reduction/notes.html</p></li>
<li><p>https://www.stat.cmu.edu/~larry/=sml/dimension_reduction.pdf</p></li>
<li><p>https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.PCA.html</p></li>
<li><p>https://stats.stackexchange.com/questions/376981/cumulative-sum-of-pca-explained-variance-greater-than-1</p></li>
<li><p>https://github.com/scikit-learn/scikit-learn/issues/22974</p></li>
<li><p>https://jakevdp.github.io/PythonDataScienceHandbook/05.09-principal-component-analysis.html</p></li>
<li><p>https://www.researchgate.net/figure/A-scree-plot-for-explained-variance-and-eigenvalues-for-the-ten-Principal-Components_fig1_338833359</p></li>
</ol>
<p>TSNE:</p>
<ol type="1">
<li><p>https://scikit-learn.org/stable/modules/generated/sklearn.manifold.TSNE.html</p></li>
<li><p>https://jfh.georgetown.domains/dsan5000/slides-and-labs/_site/content/slides/dimensionality-reduction/notes.html#t-distributed-stochastic-neighbor-embedding.</p></li>
</ol>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>